@page "/compras/index"
@using BlazorApp.Shared.Models
@inject HttpClient http
@inject IJSRuntime JsRuntime

<br />
<div class="container row p-0 m-0">
    <div class="col-9">
        <h2 class="text-info">Lista de Compras</h2>
    </div>
    <div class="col-3">
        <a asp-page="Create" class="btn btn-info form-control text-white">Nova Lista de Compras</a>
    </div>


    <div class="col-12 border p-3 mt-3">
        <form method="post">
            @if (pessoas.Count() > 0)
            {
                <table class="table table-striped border">
                    <tr class="table-secondary">
                        <th>
                            <label asp-for="pessoas.FirstOrDefault().Nome"></label>
                        </th>
                        <th>
                            <label asp-for="pessoas.FirstOrDefault().Quantidade"></label>
                        </th>
                        <th>
                            <label asp-for="pessoas.FirstOrDefault().Valor"></label>
                        </th>
                        <th>

                        </th>
                    </tr>
                    @foreach (var lista in pessoas)
                    {
                        <tr>
                            <td>@lista.Id</td>
                            <td>@lista.Nome</td>
                            <td>@lista.Quantidade</td>
                            <td>@lista.Valor</td>
                            <td>
                                <button asp-page-handler="Delete"
                                        asp-route-id="@lista.Id"
                                        onclick="return confirm('Tem certeza que deseja excluir?')"
                                        class="btn btn-danger btn-sm">
                                    Excluir
                                </button>
                                <a asp-page="Edit" asp-route-id="@lista.Id" class="btn btn-success btn-sm text-white">Editar</a>
                            </td>
                        </tr>
                    }
                </table>
            }
            else
            {
                <p>Ainda nao tem lista cadastradas.</p>
            }
        </form>
    </div>


    <div class="col-12" style="text-align:center">
        <br />
        <span class="h3 text-info">OR</span>
        <br /><br />
    </div>
    <div class="col-12 border p-3">

        <table id="DT_load" class="table table-striped table-bordered" style="width:100%">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Nome Produto</th>
                    <th>Quantidade</th>
                    <th>Valor</th>
                    <th></th>
                </tr>
            </thead>
        </table>
    </div>
</div>



@code
{
    string fazerPerqunta = String.Empty;
    ElementReference InputToFocus;

      //IList<Pessoa> pessoas;
    IList<Pessoa> pessoas = new List<Pessoa>();

    async Task Focus()
    {

        await JsRuntime.InvokeVoidAsync(identifier: "focusCanpo", InputToFocus);

    }

    async Task FacaPerqunta()
    {
        var response = await JsRuntime.InvokeAsync<string>(identifier: "criarPrompt",
            fazerPerqunta);

        await JsRuntime.InvokeVoidAsync(identifier: "pegarElemento", "pergunta", response);
    }

    async Task MostrarAlert()
    {
        await JsRuntime.InvokeVoidAsync(identifier: "criarAlert");
    }
}

